# CPU, ROM, RAMs
# --------------

cell cpu:cpu rot0 @-109.54,44.3,-53.74,105.3
	t1@-53.74,44.56 t2@-53.74,44.82 t3@-53.74,45.06 t4@-53.74,45.32 t5@-53.74,45.56 t6@-53.74,45.81
	t7@-53.74,46.05 t8@-53.74,46.3 t9@-53.74,46.56 t10@-53.74,46.8 t11@-53.74,64.84 t12@-53.74,65.09
	t13@-53.74,65.34 t14@-53.74,65.59 t15@-53.74,65.85 t16@-53.74,105
	r1@-66.38,105.3 r2@-66.55,105.3 r3@-66.74,105.3 r4@-67.06,105.3 r5@-67.24,105.3 r6@-67.42,105.3
	r7@-67.75,105.3 r8@-81.49,104.3 r9@-81.62,104.3 r10@-81.87,104.3 r11@-82.01,104.3 r12@-82.14,104.3
	r13@-82.4,104.5 r14@-85.68,105.3 r15@-87.74,105.3 r16@-88.43,105.3 r17@-90.64,105.3 r18@-91.33,105.3
	r19@-93.54,105.3 r20@-94.23,105.3 r21@-96.45,105.3 r22@-97.13,105.3 r23@-99.19,105.3 r24@-99.87,102.75
	r25@-102.26,102.48 r26@-102.77,102.75 r27@-104.99,102.48 r28@-105.85,102.75 r29@-107.91,102.48
	b1@-109.54,45.67 b2@-109.54,45.92 b3@-109.54,46.17 b4@-109.54,46.42 b5@-109.54,46.66 b6@-109.54,46.91
	b7@-109.54,47.17 b8@-109.54,47.41 b9@-109.54,99.74 b10@-109.54,99.88 b11@-109.54,99.99 b12@-109.54,100.12
	b13@-109.54,100.24 b14@-109.54,100.36 b15@-109.54,100.48 b16@-109.54,100.61 b17@-109.54,100.86 b18@-109.54,100.98
	b19@-109.54,101.11 b20@-109.54,101.23 b21@-109.54,101.35 b22@-109.54,101.48 b23@-109.54,101.6 b24@-109.54,101.73
	b25@-109.54,101.98;
alias cell sm83 -> cpu;

cell wave_ram:wave_ram rot0 @-97.33,149.53,-85.14,176.31
	col0@-89.95,173.05,-89.93,149.81
	col1@-90.09,173.06,-90.08,149.82
	col2@-90.22,173.06,-90.20,149.82
	col3@-90.35,173.05,-90.33,149.82
	a2@-86.08,175.05,-89.32,175.05
	~a2@-86.09,174.92,-89.33,174.92
	a3@-86.09,174.79,-89.34,174.79
	~a3@-86.08,174.66,-89.33,174.66
	wr@-90.87,173.07,-90.84,149.84
	~bl_pch@-85.45,149.77,-85.47,172.89
	~bl_pch@-94.66,173.39,-94.61,149.82
	~wldrv_pch@-86.09,174.54,-89.34,174.54
	~wldrv_pch@-86.05,176.10,-89.34,176.10
	dout0@-97.31,171.92
	dout1@-97.31,169.02
	dout2@-97.31,166.10
	dout3@-97.31,163.16
	dout4@-97.32,160.25
	dout5@-97.32,157.34
	dout6@-97.30,154.45
	dout7@-97.31,151.52
	din0@-94.08,170.41
	din1@-94.06,167.48
	din2@-94.06,164.57
	din3@-94.05,161.65
	din4@-94.05,158.73
	din5@-94.06,155.82
	din6@-94.04,152.91
	din7@-94.04,149.98
	->apu-ch3;
alias cell waveram -> wave_ram;

cell boot_rom:boot_rom rot0 @-106.41,148.26,-98.58,176.30
	~row0@-102.41,149.42,-98.88,149.42
	~row1@-102.41,150.21,-98.89,150.21
	~row2@-102.42,149.73,-98.89,149.73
	~row3@-102.42,149.91,-98.88,149.91
	col0@-103.23,150.63,-103.27,175.69
	col1@-102.71,150.63,-102.74,175.71
	col2@-103.05,150.63,-103.09,175.70
	col3@-102.88,150.63,-102.91,175.70
	a2@-98.87,149.08,-102.41,149.08
	~a2@-98.88,149.21,-102.42,149.21
	a3@-98.88,148.81,-102.42,148.81
	~a3@-98.88,148.95,-102.42,148.95
	a6@-103.45,150.65,-103.48,175.72
	~a6@-103.58,150.63,-103.61,175.72
	a7@-103.72,150.64,-103.75,175.71
	~a7@-103.85,150.63,-103.88,175.72
	~wl_ena@-98.88,148.68,-102.42,148.68
	wl_pch@-98.77,176.16,-102.55,176.16
	~bl_pch@-104.23,150.63,-104.27,175.70
	oe@-106.28,150.63,-106.32,175.69
	~oe@-104.38,150.63,-104.41,175.72
	d0@-106.39,173.65
	d1@-106.39,170.52
	d2@-106.39,167.40
	d3@-106.40,164.26
	d4@-106.39,161.16
	d5@-106.41,158.00
	d6@-106.40,154.88
	d7@-106.41,151.73
	->bootrom;
alias cell bootrom -> boot_rom;

cell high_ram:high_ram rot180, flip @-157.27,135.87,-123.10,162.72
	col0@-130.61,136.13,-130.63,159.27
	col1@-130.48,136.14,-130.48,159.27
	col2@-130.35,136.14,-130.35,159.27
	col3@-130.23,136.14,-130.23,159.27
	a2@-131.27,162.14,-156.35,162.13
	~a2@-131.27,162.01,-156.35,162.00
	a3@-131.27,161.88,-156.34,161.87
	~a3@-131.27,161.75,-156.34,161.74
	a4@-131.27,161.62,-156.34,161.61
	~a4@-131.28,161.49,-156.34,161.48
	a5@-131.28,161.36,-156.34,161.34
	~a5@-131.27,161.23,-156.34,161.22
	a6@-131.27,161.09,-156.34,161.09
	~a6@-131.27,160.97,-156.34,160.95
	~bl_pch@-125.91,136.13,-125.92,159.15
	~bl_pch@-156.96,136.09,-156.99,159.16
	~wldrv_pch@-131.27,160.84,-156.35,160.82
	~wldrv_pch@-131.26,162.40,-156.36,162.39
	wldrv_ena@-131.27,162.27,-156.36,162.26
	oe@-123.22,136.13,-123.25,159.13
	~oe@-125.77,136.13,-125.79,159.15
	wr@-129.70,136.13,-129.70,159.15
	d0@-123.09,157.45
	d1@-123.09,154.55
	d2@-123.09,151.63
	d3@-123.09,148.70
	d4@-123.10,145.79
	d5@-123.10,142.88
	d6@-123.10,139.97
	d7@-123.10,137.05
	->hram;
alias cell hram -> high_ram;

cell oam_a:oam rot180, flip @-189.61,135.84,-164.90,162.69
	col0@-172.37,136.10,-172.39,159.20
	col1@-172.23,136.11,-172.25,159.21
	col2@-172.11,136.10,-172.13,159.22
	col3@-171.98,136.11,-171.99,159.22
	a2@-172.85,162.13,-188.80,162.11
	~a2@-172.85,161.99,-188.79,161.98
	a3@-172.85,161.87,-188.79,161.85
	~a3@-172.86,161.73,-188.79,161.72
	a4@-172.85,161.60,-188.80,161.59
	~a4@-172.86,161.47,-188.80,161.45
	a5@-172.84,161.34,-188.79,161.33
	~a5@-172.84,161.21,-188.80,161.20
	a6@-172.84,161.09,-188.80,161.06
	~a6@-172.84,160.95,-188.80,160.94
	~bl_pch@-167.66,136.11,-167.70,159.10
	~bl_pch@-189.34,136.07,-189.34,159.27
	~wldrv_pch@-172.84,162.39,-188.80,162.37
	~wldrv_pch@-172.85,160.82,-188.79,160.80
	oe@-164.98,136.10,-165.01,159.13
	~oe@-167.53,136.11,-167.55,159.12
	wr@-171.45,136.10,-171.47,159.12
	d0@-164.89,157.45
	d1@-164.89,154.53
	d2@-164.89,151.60
	d3@-164.90,148.70
	d4@-164.89,145.78
	d5@-164.90,142.88
	d6@-164.89,139.95
	d7@-164.90,137.02
	->ppu-oam;

cell oam_b:oam rot0 @-214.14,135.84,-189.38,162.68
	col0@-206.64,136.09,-206.66,159.19
	col1@-206.77,136.09,-206.80,159.17
	col2@-206.90,136.09,-206.93,159.18
	col3@-207.03,136.09,-207.06,159.18
	a2@-190.24,162.10,-206.02,162.11
	~a2@-190.23,161.98,-206.02,161.98
	a3@-190.23,161.85,-206.02,161.85
	~a3@-190.23,161.71,-206.02,161.72
	a4@-190.23,161.59,-206.02,161.59
	~a4@-190.23,161.45,-206.02,161.45
	a5@-190.23,161.32,-206.02,161.33
	~a5@-190.23,161.20,-206.01,161.19
	a6@-190.23,161.06,-206.02,161.06
	~a6@-190.23,160.94,-206.02,160.94
	~bl_pch@-211.34,136.08,-211.36,159.10
	~bl_pch@-189.68,136.09,-189.70,159.26
	~wldrv_pch@-190.24,162.37,-206.02,162.37
	~wldrv_pch@-190.23,160.80,-206.02,160.80
	oe@-214.02,136.08,-214.04,159.10
	~oe@-211.48,136.09,-211.49,159.09
	wr@-207.55,136.09,-207.58,159.11
	d0@-214.15,157.41
	d1@-214.14,154.51
	d2@-214.16,151.59
	d3@-214.14,148.66
	d4@-214.14,145.74
	d5@-214.15,142.84
	d6@-214.15,139.91
	d7@-214.15,137.01
	->ppu-oam;


# Wires driven by CPU
# -------------------

wire m1:ctl
	cpu.t1 -> lexy.in
	@-78.03,48.74,-78.04,44.43,-55.97,44.43,-55.97,44.56,-49.25,44.58,-49.34,108.48,-103.42,108.45,
	 -103.42,110.63,-105.34,110.63,-105.34,111.76;

wire clk_ena:ctl
	cpu.t11 -> tubo.s abol.in
	@-54.61,99.37,-54.56,64.84,-46.72,64.85,-46.79,123.81,-46.82,149.72,-56.14,149.72
	@-46.79,123.81,-58.72,123.81,-58.73,135.73,-60.60,135.73,-60.60,136.19;

wire osc_ena:ctl
	cpu.t14 -> ucob.in atez.in ck1_ck2.ena
	@-59.34,103.96,-54.23,103.96,-54.17,65.59,-46.20,65.60,-46.26,109.67,-46.30,150.06,-56.14,150.06
	@-46.26,109.67,-82.07,109.65,-82.07,110.51,-81.41,110.51,-81.41,122.33,-81.94,122.33,-81.94,127.28,-81.76,127.28,
	 -81.76,130.81,-81.60,130.81,-81.60,134.56,-81.95,134.56,-81.95,139.02,-82.11,139.02,-82.11,139.84
	@-48.19,150.06,-48.30,234.34,-121.43,234.30,-121.43,238.04,-117.44,238.04,-117.44,238.37;

wire read:ctl
	cpu.r1 -> lagu.in1 lavo.in1 ujyv.d0
	@-66.48,104.42,-66.48,104.65,-66.43,104.73,-66.43,104.98,-66.38,105.10,-66.38,107.84,-72.75,107.82,
	 -72.75,111.31,-81.58,111.31,-81.58,111.75
	@-80.22,111.31,-80.22,114.98,-79.70,114.98,-79.70,118.98,-79.02,118.98,-79.02,122.96,-79.38,122.96,
	 -79.38,127.15,-80.23,127.15,-80.23,131.23,-80.06,131.23,-80.06,134.69,-80.76,134.69,-80.76,138.88,
	 -80.93,138.88,-80.93,139.84;

wire write:ctl
	cpu.r2 -> tegu.in2 lagu.in3 arev.in2
	@-66.62,104.41,-66.62,104.63,-66.66,104.72,-66.66,105.02,-66.56,105.15,-66.56,109.40
	@-56.16,151.77,-49.38,151.77,-49.34,109.41,-66.56,109.40,-80.20,109.39
	@-80.73,111.77,-80.73,110.00,-80.20,110.00,-80.20,108.71,-112.70,108.70,-112.64,40.66,-85.60,40.69,
	 -85.60,37.19,-89.89,37.19,-89.89,35.55;

wire mreq:ctl
	cpu.r7 -> texo.in1 agut.in3
	@-67.80,104.40,-67.80,104.84,-67.78,104.89,-67.78,105.15,-67.76,105.23,-67.76,108.34,-45.56,108.35,-45.40,108.35,
	 -45.31,43.65,-76.47,43.64,-76.47,36.89,-85.95,36.89,-85.95,35.53
	@-45.56,108.35,-45.63,154.85,-56.16,154.85;

wire cpu_irq_ack0:ctl
	cpu.r14 -> lety.in
	@-85.53,99.14,-85.53,99.27,-85.66,99.27,-85.66,99.58,-85.69,99.58,-85.70,109.64,-83.95,109.64,
	 -83.95,110.75,-83.11,110.75,-83.11,111.76;

wire cpu_irq_ack1:ctl
	cpu.r16 -> leja.in
	@-88.29,99.14,-88.29,99.27,-88.41,99.27,-88.41,99.57,-88.42,99.57,-88.43,109.39,-87.90,109.39,
	 -87.90,110.55,-88.42,110.55,-88.42,111.76;

wire cpu_irq_ack2:ctl
	cpu.r18 -> lesa.in
	@-91.27,99.13,-91.27,99.56,-91.32,99.56,-91.34,109.09,-89.77,109.09,-89.77,110.72,-89.10,110.72,-89.10,111.76;

wire cpu_irq_ack3:ctl
	cpu.r20 -> lufe.in
	@-94.02,99.13,-94.02,99.26,-94.19,99.26,-94.19,99.55,-94.23,99.55,-94.23,109.25,-91.32,109.25,
	 -91.32,110.58,-89.45,110.58,-89.45,111.77;

wire cpu_irq_ack4:ctl
	cpu.r22 -> lamo.in
	@-97.02,99.16,-97.02,99.58,-97.13,99.58,-97.14,109.26,-94.70,109.26,-94.70,111.01,-93.54,111.01,-93.54,111.77;

wire cpu_irq_ack5:ctl
	cpu.r24 -> # not connected
	@-99.88,99.13,-99.88,102.77;

wire cpu_irq_ack6:ctl
	cpu.r26 -> # not connected
	@-102.78,99.13,-102.78,102.77;

wire cpu_irq_ack7:ctl
	cpu.r28 -> # not connected
	@-105.76,99.14,-105.76,99.59,-105.84,99.59,-105.84,102.75;


# Wires driven by Wave RAM
# ------------------------

wire wave_rd_d0:data
	wave_ram.dout0 -> cyfo.d cugo.in
	@-96.79,171.91,-97.57,171.91,-97.57,176.08
	@-97.57,174.75,-96.20,174.75,-96.20,179.15,-92.43,179.15,-92.43,181.66,-87.99,181.66,-87.99,186.78,
	 -88.16,186.78,-88.16,191.94,-87.15,191.94,-87.15,196.76,-76.56,196.77,-76.56,195.19;

wire wave_rd_d1:data
	wave_ram.dout1 -> cesy.d cegu.in
	@-96.79,169.01,-97.70,169.01,-97.70,176.10
	@-97.70,174.93,-96.37,174.93,-96.37,179.28,-92.85,179.28,-92.85,182.65,-92.59,182.65,-92.59,187.16,
	 -87.82,187.16,-87.82,196.59,-80.83,196.59,-80.83,195.20;

wire wave_rd_d2:data
	wave_ram.dout2 -> atec.in budy.d
	@-96.79,166.10,-97.83,166.10,-97.83,176.09
	@-97.83,175.10,-96.55,175.10,-96.55,180.09,-89.27,180.09,-89.27,181.92,-80.30,181.92,-80.30,188.83,
	 -78.60,188.83,-78.60,189.29;

wire wave_rd_d3:data
	wave_ram.dout3 -> adok.in begu.d
	@-96.80,163.18,-97.95,163.18,-97.97,175.28,-97.97,176.09
	@-97.97,175.28,-96.71,175.28,-96.71,180.47,-93.79,180.47,-93.79,182.09,-89.19,182.09,-89.19,186.18,
	 -85.77,186.18,-85.77,189.27;

wire wave_rd_d4:data
	wave_ram.dout4 -> baca.in cuvo.d
	@-96.78,160.26,-98.08,160.26,-98.09,175.45,-98.09,176.09
	@-98.09,175.45,-96.88,175.45,-96.88,180.48,-97.75,180.48,-97.75,181.84,-99.45,181.84,-99.45,191.77,
	 -98.76,191.77,-98.76,198.84,-74.85,198.85,-74.85,195.20;

wire wave_rd_d5:data
	wave_ram.dout5 -> bero.in cevo.d
	@-96.80,157.35,-98.21,157.35,-98.23,175.63,-98.23,176.09
	@-96.80,157.35,-98.21,157.35,-98.23,175.63,-98.23,176.09,-98.23,175.63,-97.06,175.63,-97.06,180.09,
	 -98.01,180.09,-98.01,182.28,-98.07,182.28,-98.07,188.13,-100.82,188.13,-100.82,189.27
	@-98.01,182.22,-79.10,182.23,-79.10,188.54,-79.28,188.54,-79.28,192.16,-79.12,192.16,-79.12,193.73;

wire wave_rd_d6:data
	wave_ram.dout6 -> bora.d cuto.in
	@-96.78,154.45,-98.33,154.45,-98.35,175.80,-98.35,176.09
	@-98.35,175.80,-97.23,175.80,-97.23,179.84,-90.90,179.84,-90.90,182.69,-77.05,182.70,-77.05,188.71,
	 -76.90,188.71,-76.90,192.76,-83.04,192.76,-83.04,193.73;

wire wave_rd_d7:data
	wave_ram.dout7 -> akaf.in bepa.d
	@-96.76,151.52,-98.46,151.52,-98.49,175.97,-98.49,176.09
	@-98.49,175.97,-97.39,175.97,-97.39,180.34,-94.05,180.34,-94.05,181.79,-88.84,181.79,-88.84,188.01,
	 -87.48,188.01,-87.48,189.27;
